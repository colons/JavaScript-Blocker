<!--
/***************************************
 * @file popover.html
 * @author Travis Roman (travis@toggleable.com)
 * @package JavaScript Blocker (http://javascript-blocker.toggleable.com)
 * @version 1.2.7-1
 ***************************************/
-->

<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8" />
	
	<title></title>
		
	<link rel="stylesheet" href="css/poppy.css" type="text/css" />
	<link rel="stylesheet" href="css/main.css" type="text/css" />
	<link rel="stylesheet" href="css/highlight.css" />
	
	<script src="js/highlight.js"></script>
	<script>
		_ = safari.extension.globalPage.contentWindow._;
		
		document.addEventListener('DOMContentLoaded', function () {
			safari.extension.globalPage.contentWindow.JavaScriptBlocker.hljs = hljs;
			setTimeout(function () {
				safari.extension.globalPage.contentWindow.JavaScriptBlocker.bind_events();
			}, 200);
			
			var inputs = document.getElementsByTagName('input'),
					ogroups = document.getElementsByTagName('optgroup'),
					i,
					b;
					
			for (i = 0; i < inputs.length; i++) {
				if (inputs[i].value && inputs[i].value.length) inputs[i].value = _(inputs[i].value);
				if (inputs[i].placeholder && inputs[i].placeholder.length) inputs[i].placeholder = _(inputs[i].placeholder);
			}
			for (b = 0; b < ogroups.length; b++)
				ogroups[b].label = _(ogroups[b].label);
				
			if (window.navigator.platform.indexOf('Win') > -1) document.body.className += ' windows';
			else if (window.navigator.platform.indexOf('Mac') > -1) document.body.className += ' macos';
		});
		
		window.addEventListener('message', function (event) {
			if (event.data === 'reloadOnce') window.location.reload();
		});
	</script>
</head>

<body>
	<header><h1><script>document.write(_('JavaScript Blocker'));</script></h1></header>
	
	<div id="container">
		<div id="find-bar">
			<input type="button" id="find-bar-done" value="Done" />
			<input type="search" id="find-bar-search" incremental="incremental" results="10" autosave="find_on" />
			<label for="find-bar-search" id="find-bar-matches"></label>
		</div>
		<div id="setup" class="whoop">
			<p><img src="images/toggleable.png" alt="Toggleable" /> <img src="Icon-48.png" alt="JS Blocker" /></p>
			<p><script>document.write(_('Thanks for using {1}', [_('JavaScript Blocker')]));</script></p>
			<p><script>document.write(_('Which mode would you like to run in?'));</script></p>
			<p><input type="button" id="setup-block" value="Blocking Mode" /> <input type="button" id="setup-allow" value="Allowing Mode" /></p>
		</div>
		<div id="main" class="whoop">
			<div id="page-lists">
				<label><script>document.write(_('Page:'));</script></label>
				<select id="page-list">
					<optgroup label="Main Page">
						<option>http://javascript-blocker.toggleable.com</option>
					</optgroup>
					<optgroup label="Inline Frame Pages">
						<option>http://example.com</option>
					</optgroup>
				</select>
			</div>
			<div class="info-container">
				<label class="allowed-label"><script>document.write(_('Allowed:'));</script></label> <span id="allowed-scripts-count">0</span>
				<input type="button" value="Block All" id="block-domain" />
				<select id="block-options" class="domain-options">
					<optgroup label="Block on">
					</optgroup>
				</select>
				<br style="clear:both;">
			</div>
	
			<div id="allowed-script-urls">
				<ul class="main-wrapper"></ul>
			</div>
	
			<div class="info-container">
				<label class="blocked-label"><script>document.write(_('Blocked:'));</script></label> <span id="blocked-scripts-count">0</span>
				<input type="button" value="Allow All" id="allow-domain" />
				<select id="allow-options" class="domain-options">
					<optgroup label="Allow on">
					</optgroup>
				</select>
				<br style="clear:both;">
			</div>
	
			<div id="blocked-script-urls">
				<ul class="main-wrapper"></ul>
			</div>
	
			<div class="info-container">
				<label class="unblocked-label"><script>document.write(_('Unblocked:'));</script></label> <span id="unblocked-scripts-count">0</span>
			</div>
	
			<div id="unblocked-script-urls">
				<ul class="main-wrapper"></ul>
			</div>
	
			<input type="button" value="Show Rules" id="view-rules" />
			<div id="disclaimer">
				<p><script>document.write(_('Disclaimer.'));</script><br />
				<!--<input type="button" value="Submit Anonymous Usage Information" id="submit-information" />-->
					<input type="button" value="Disable JavaScript Blocker" id="disable" /></p>
			</div>
		</div>
		<div id="rules-list" class="whoop">
			<div class="info-container">
				<p class="misc-info">0 domains, 0 rules</p>
				<input type="button" value="Close Rules List" id="rules-list-back" />
				<input type="button" value="Delete Expanded Rules" id="reset-domain" />
			</div>
			<div id="data">
				<a href="javascript:void(0)" id="collapse-all"><script>document.write(_('Collapse All'));</script></a> <span class="label">—</span>
				<a href="javascript:void(0)" id="expand-all"><script>document.write(_('Expand All'));</script></a> <span class="label">￨</span>
				<a href="javascript:void(0)" id="edit-domains"><script>document.write(_('Edit'));</script></a>
				<div id="rules-filter-bar" class="filter-bar">
					<ul id="filter-type-collapse">
						<li id="filter-all"class="selected"><script>document.write(_('All'));</script></li>
						<li id="filter-collapsed"><script>document.write(_('Collapsed'));</script></li>
						<li id="filter-expanded"><script>document.write(_('Expanded'));</script></li>
						<li class="filter-divider">|</li>
					</ul>
					<ul id="filter-type-state">
						<li id="filter-state-all" class="selected"><script>document.write(_('Any'));</script></li>
						<li id="filter-enabled"><script>document.write(_('Enabled'));</script></li>
						<li id="filter-disabled"><script>document.write(_('Disabled'));</script></li>
					</ul>
					<br style="clear:both;" />
				</div>
				<div id="rules-filter-bar-two" class="filter-bar">
					<ul>
						<li id="li-domain-filter"><input type="search" placeholder="Domains" incremental="incremental" results="10" autosave="domain_filter" id="domain-filter" /><br style="clear:both;" /></li>
					</ul>
					<br style="clear:both;" />
				</div>
				<ul id="rules-list-rules"></ul>
			</div>
		</div>
		<div id="misc" class="whoop">
			<div class="info-container">
				<p class="misc-info"></p>
				<input type="button" value="Close" id="misc-close" />
			</div>
			<div id="misc-content"></div>
		</div>
	</div>
</body>
</html>